# Vera-BOM

A proof of concept of usage of the [Veracode APIs](https://app.swaggerhub.com/apis/Veracode/veracode-sca_agent_api_specification/3.0) to consume SBOMs of various format and output vulnerability and license risk. Written in JavaScript using [Node.js](https://nodejs.org/en/).

## Setup

Save Veracode API credentials in your home folder `~/.veracode/credentials` like this:

    [default]
    veracode_api_key_id = <YOUR_API_KEY_ID>
    veracode_api_key_secret = <YOUR_API_KEY_SECRET>

An example of how to generate credentials and create the Credentials file is also provided on the [Veracode Help Center](https://docs.veracode.com/r/c_configure_api_cred_file)

This project has copied in [auth.js](https://gist.github.com/mrpinghe/f44479f2270ea36bf3b7cc958cc76cc0) as a JavaScript HMAC signing library from the [Veracode Community Projects](https://github.com/veracode/Veracode-Community-Projects#hmac-signing-libraries). There is an alternative to this library that uses the Web Crypto API instead of Node [here](https://gist.github.com/ThibaudLopez/fe1baeaa4461cbf0bfa8fd258ff43243).

Ensure you have node and npm installed:

    node -v
    npm -v

## Run

Run by calling in a Terminal or cmd window (results to console):

    npm test.js -f "<your_sbom.json/xml>"
    
Or save results to a json file with -o option:

    npm test.js -f "<your_sbom.json/xml>" -o "<your_file.json>"

## Extra

There is a sample Veracode generated CycloneDX formatted SBOM at verademo_verapi_cdx.json

There is a sample of the Veracode [library API GET method](https://app.swaggerhub.com/apis/Veracode/veracode-sca_agent_api_specification/3.0#/registry/getLibraryUsingGET) at sampleApi_libraryGET_result.json

There is a sample of the Veracode [component-activity API GET method](https://app.swaggerhub.com/apis/Veracode/veracode-sca_agent_api_specification/3.0#/registry/getComponentActivityUsingGET) at sampleApi_componentActivityGET_result.json


SBOMs tested included CycloneDX JSON, ~~, CycloneDX XML, SPDX, SWID~~ formats generated by:
- CycloneDX JSON - via [Veracode API](https://docs.veracode.com/r/Generate_a_Software_Bill_of_Materials_SBOM_for_Upload_Scans_with_the_REST_API)
- CycloneDX XML - coming next? via [cyclonedx-node-module](https://github.com/CycloneDX/cyclonedx-node-module)
- SPDX - coming ??? via ???
- SWID - coming ??? via ???
